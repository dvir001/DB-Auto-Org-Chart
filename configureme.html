<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration - DB AutoOrgChart</title>
    <link rel="stylesheet" href="/static/configureme.css">
</head>
<body>
    <div class="container">
        <a href="/" class="nav-link">‚Üê Back to Org Chart</a>
        
        <div class="header">
            <h1>Configuration Settings</h1>
            <p>Customize your organization chart appearance and behavior</p>
        </div>

        <div class="config-section">
            <h2>üé® Appearance Settings</h2>
            
            <div class="config-group">
                <div class="config-item">
                    <label class="config-label">Chart Title</label>
                    <div class="config-description">Customize the main title displayed in the header</div>
                    <div class="config-controls">
                        <input type="text" id="chartTitle" placeholder="Organization Chart">
                        <button class="btn btn-secondary" type="button" data-config-action="reset-chart-title">Reset to Default</button>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Header Bar Color</label>
                    <div class="config-description">Choose the color for the top header bar</div>
                    <div class="config-controls">
                        <input type="color" id="headerColor" value="#0078d4">
                        <input type="text" id="headerColorHex" placeholder="#0078d4" maxlength="7">
                        <button class="btn btn-secondary" type="button" data-config-action="reset-header-color">Reset to Default</button>
                    </div>
                    <div class="preview-section">
                        <div class="preview-header" id="headerPreview">
                            Preview Header
                        </div>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Logo Image</label>
                    <div class="config-description">Upload a custom logo (max 5MB, recommended height 40px, PNG/JPG)</div>
                    <div class="config-controls">
                        <label for="logoUpload" class="file-upload-label">Choose Logo</label>
                        <input type="file" id="logoUpload" accept="image/*">
                        <span class="current-logo">
                            <img id="currentLogo" src="/static/icon.png" alt="Current Logo">
                        </span>
                        <button class="btn btn-secondary" type="button" data-config-action="reset-logo">Reset to Default</button>
                        <span id="logoStatus" class="upload-status"></span>
                    </div>
                    <div id="logoDropZone" class="upload-dropzone">Or drag & drop a PNG/JPG here</div>
                </div>

                <div class="config-item">
                    <label class="config-label">Favicon Image</label>
                    <div class="config-description">Upload a custom favicon for browser tab icon (max 5MB, recommended 32x32px ICO/PNG)</div>
                    <div class="config-controls">
                        <label for="faviconUpload" class="file-upload-label">Choose Favicon</label>
                        <input type="file" id="faviconUpload" accept="image/x-icon,image/png,image/jpeg,.ico">
                        <span class="current-logo">
                            <img id="currentFavicon" src="/favicon.ico" alt="Current Favicon">
                        </span>
                        <button class="btn btn-secondary" type="button" data-config-action="reset-favicon">Reset to Default</button>
                        <span id="faviconStatus" class="upload-status"></span>
                    </div>
                    <div id="faviconDropZone" class="upload-dropzone">Or drag & drop an ICO/PNG/JPG here</div>
                </div>

                <div class="config-item">
                    <label class="config-label">Node Colors by Level</label>
                    <div class="config-description">Customize colors for each hierarchy level</div>
                    <div class="node-color-grid">
                        <div class="config-controls">
                            <span class="node-color-label">Level 1:</span>
                            <input type="color" id="level0Color" value="#90EE90">
                            <input type="text" id="level0ColorHex" placeholder="#90EE90" maxlength="7">
                        </div>
                        <div class="config-controls">
                            <span class="node-color-label">Level 2:</span>
                            <input type="color" id="level1Color" value="#FFFFE0">
                            <input type="text" id="level1ColorHex" placeholder="#FFFFE0" maxlength="7">
                        </div>
                        <div class="config-controls">
                            <span class="node-color-label">Level 3:</span>
                            <input type="color" id="level2Color" value="#E0F2FF">
                            <input type="text" id="level2ColorHex" placeholder="#E0F2FF" maxlength="7">
                        </div>
                        <div class="config-controls">
                            <span class="node-color-label">Level 4:</span>
                            <input type="color" id="level3Color" value="#FFE4E1">
                            <input type="text" id="level3ColorHex" placeholder="#FFE4E1" maxlength="7">
                        </div>
                        <div class="config-controls">
                            <span class="node-color-label">Level 5:</span>
                            <input type="color" id="level4Color" value="#E8DFF5">
                            <input type="text" id="level4ColorHex" placeholder="#E8DFF5" maxlength="7">
                        </div>
                        <div class="config-controls">
                            <span class="node-color-label">Level 6:</span>
                            <input type="color" id="level5Color" value="#FFEAA7">
                            <input type="text" id="level5ColorHex" placeholder="#FFEAA7" maxlength="7">
                        </div>
                        <button class="btn btn-secondary" type="button" data-config-action="reset-node-colors">Reset All Node Colors</button>
                    </div>
                </div>
            </div>

            <h2 class="section-heading">‚öôÔ∏è Behavior Settings</h2>
            
            <div class="config-group">
                <div class="config-item">
                    <label class="config-label">Auto-Update Schedule</label>
                    <div class="config-description">Set the time for daily automatic data updates</div>
                    <div class="config-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="autoUpdateEnabled" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Enable Auto-Update</span>
                        <div id="updateTimePicker" class="inline-time-picker">
                            <select id="updateHour" class="time-select"></select> :
                            <select id="updateMinute" class="time-select"></select>
                            <input type="hidden" id="updateTime" value="20:00">
                        </div>
                        <button class="btn btn-secondary" type="button" data-config-action="reset-update-time">Reset to Default</button>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Initial Collapse Level</label>
                    <div class="config-description">How many levels to show expanded on initial load</div>
                    <div class="config-controls">
                        <select id="collapseLevel">
                            <option value="1">Show Level 1 only</option>
                            <option value="2" selected>Show 2 levels</option>
                            <option value="3">Show 3 levels</option>
                            <option value="4">Show 4 levels</option>
                            <option value="all">Show all levels</option>
                        </select>
                        <button class="btn btn-secondary" type="button" data-config-action="reset-collapse-level">Reset to Default</button>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Search Settings</label>
                    <div class="config-description">Configure search behavior</div>
                    <div class="config-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="searchAutoExpand" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Auto-expand to search results</span>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <label class="toggle-switch">
                            <input type="checkbox" id="searchHighlight" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Highlight search results</span>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Display Options</label>
                    <div class="config-description">Customize what information is shown</div>
                    <div class="config-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="showDepartments" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Show department names</span>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <label class="toggle-switch">
                            <input type="checkbox" id="showEmployeeCount" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Show employee count badges</span>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">New Employee Highlighting</label>
                    <div class="config-description">Highlight employees who recently joined the organization</div>
                    <div class="config-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="highlightNewEmployees" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Highlight new employees</span>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <span class="label-prefix">Consider employees new if joined within:</span>
                        <select id="newEmployeeMonths">
                            <option value="1">1 month</option>
                            <option value="3" selected>3 months</option>
                            <option value="6">6 months</option>
                            <option value="12">12 months</option>
                        </select>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Employee Filtering</label>
                    <div class="config-description">Control which employees appear in the organizational chart</div>
                    <div class="config-controls">
                        <label class="toggle-switch">
                            <input type="checkbox" id="hideDisabledUsers" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Hide disabled users</span>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <label class="toggle-switch">
                            <input type="checkbox" id="hideGuestUsers" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Hide guest users</span>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <label class="toggle-switch">
                            <input type="checkbox" id="hideNoTitle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>Hide employees with no job title</span>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <span class="label-prefix">Ignored job titles (comma-separated):</span>
                        <input type="text" id="ignoredTitlesInput" placeholder="e.g., Intern, Contractor" class="text-input-wide" />
                        <button class="btn btn-secondary" type="button" data-config-action="reset-ignored-titles">Reset to Default</button>
                    </div>
                    <div class="config-controls config-controls--spaced">
                        <span class="label-prefix">Ignored departments (comma-separated):</span>
                        <input type="text" id="ignoredDepartmentsInput" placeholder="e.g., Consultant Group, Contractors" class="text-input-wide" />
                        <button class="btn btn-secondary" type="button" data-config-action="reset-ignored-departments">Reset to Default</button>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Multi-line Children Threshold</label>
                    <div class="config-description">Set the number of direct reports at which a manager's team is wrapped into multiple rows.</div>
                    <div class="config-controls">
                        <span>Threshold:</span>
                        <input type="number" id="multiLineChildrenThreshold" min="5" max="200" step="1" class="number-input-small" placeholder="20">
                        <button class="btn btn-secondary" type="button" data-config-action="reset-multiline-settings">Reset to Default</button>
                    </div>
                </div>

                <div class="config-item">
                    <label class="config-label">Print Options</label>
                    <div class="config-description">Configure print layout settings</div>
                    <div class="config-controls">
                        <select id="printOrientation">
                            <option value="landscape" selected>Landscape</option>
                            <option value="portrait">Portrait</option>
                        </select>
                        <select id="printSize" class="select-inline">
                            <option value="a4" selected>A4</option>
                            <option value="letter">Letter</option>
                            <option value="a3">A3</option>
                        </select>
                    </div>
                </div>
            </div>

            <h2 class="section-heading">üìä Data Management</h2>
            
            <div class="config-group">
                <div class="config-item">
                    <label class="config-label">Manual Data Update</label>
                    <div class="config-description">Trigger an immediate update of employee data from Azure AD</div>
                    <div class="config-controls">
                        <button class="btn btn-primary" type="button" data-config-action="trigger-update">Update Now</button>
                        <span id="updateStatus" class="update-status"></span>
                    </div>
                </div>


            </div>

            <div class="action-buttons">
                <button class="btn btn-success" type="button" data-config-action="save-all">Save All Settings</button>
                <button class="btn btn-danger" type="button" data-config-action="reset-all">Reset Everything to Defaults</button>
                <button class="btn btn-warning" type="button" data-config-action="logout">Logout</button>
            </div>

            <div id="statusMessage" class="status-message"></div>
        </div>
    </div>

    <script src="/static/configureme.js" defer></script>
</body>
</html>